let raw=document.getElementById("raw-button"),code_zone=document.getElementById("code-zone");async function loadContent(){raw.setAttribute("href","./raw"+window.location.pathname);let r=await fetchContent(),text,lang;if(404===r.status)text="not found",lang="markdown";else if(500===r.status)text="internal server error",lang="markdown";else if(403===r.status){let p=prompt("enter the password please");for(;!p;)p=prompt("enter the password please");for(r=await fetchContent(p);403===r.status;)p=prompt("invalid password, please retry"),r=await fetchContent(p);var j=await r.json();text=j.content,lang=j.language,raw.setAttribute("href","./raw"+window.location.pathname+"?password="+p)}else{let j=await r.json();text=j.content,lang=j.language}code_zone.classList.add("language-"+lang);var lines=text.split("\n").length;let lines_text="1";code_zone.innerHTML=text.trim();for(let i=1;i<lines;i++)lines_text+=`<br>${i+1}`;document.getElementById("lines").innerHTML=lines_text,init()}function fetchContent(url){url="http://localhost:8081/arcpaste"+window.location.pathname+(void 0!==url?"?password="+url:"");return fetch(url)}async function loadNew(){code_zone.style.display="none",document.getElementById("lines").style.textAlign="center",document.getElementById("options").style.display="block";const textarea=document.getElementById("textarea");document.getElementById("save");textarea.style.display="block",textarea.addEventListener("input",function(){this.style.height="auto",this.style.height=this.scrollHeight+"px"},!1),raw.classList.add("disable")}("/new"!==window.location.pathname?loadContent:loadNew)();